# cisco
## Практические задания

### [1. ICMP симуляция](https://github.com/Vinnjy/cisco/blob/main/Practice%20task%201.md)

### [2. DHCP, DNS, WEB server](https://github.com/Vinnjy/cisco/blob/main/Practice%20task%202.md)

### [3. Статическая маршрутизация](https://github.com/Vinnjy/cisco/blob/main/Practice%20task%203.md)

### [4. Статическая маршрутизация (последовательность маршрутизаторов)](https://github.com/Vinnjy/cisco/blob/main/Practice%20task%204.md)

### [5. Динамическая маршрутизация (RIP)](https://github.com/Vinnjy/cisco/blob/main/Practice%20task%205.md)

### [6. Динамическая маршрутизация (сеть побольше)](https://github.com/Vinnjy/cisco/blob/main/Practice%20task%206.md)

### [7. VLAN - 1 коммутатор](https://github.com/Vinnjy/cisco/edit/main/Practice%20task%207.md)

### [8. VLAN - 2 коммутатора](https://github.com/Vinnjy/cisco/edit/main/Practice%20task%208.md)

### [9. VLAN - 2 коммутатора и маршрутизатор](https://github.com/Vinnjy/cisco/blob/main/Practice%20task%209.md)

### [10. VTP](https://github.com/Vinnjy/cisco/edit/main/Practice%20task%2010.md)

### [11. ACL](https://github.com/Vinnjy/cisco/blob/main/Practice%20task%2011.md)

<br>

<br>

## [Терминология](#title0)

* [Панель устройств cisco](#title6)

* [Конечные устройства](#title1)

* [Промежуточные устройства](#title2)

* [Классификация компьютерных сетей](#title3)

* [Топология](#title4)

* [IP-адреса](#title5)

<br>

<br>

<br>

## <a id="title0">Терминология</a>

<details>
  <summary>Сеть</summary>
  <br>
  
  * **Сеть** - система взаимодействующих между собой элементов.
  
  Разновидности:
  <ul>
    <li>компьютерная</li>
    <li>телевизионная</li>
    <li>теефонная</li>
    <li>...</li>
  </ul>

  * **Компьютерная сеть** - группа компьютеров, связанная коммуникационной средой.
</details>

<details>
  <summary>Компоненты</summary>
  <br>
  
  <ul>
    <li>конечные оборудование/устройства</li>
    <li>инфраструктурное оборудование/промежуточные устройства</li>
    <li>среда передачи данных/сетевая среда</li>
    <li>протоколы</li>
    <li>сетевые службы и приложения</li>
  </ul>

  Протоколы:
  <ul>
    <li>TCP/IP</li>
    <li>...</li>
  </ul>

  Сетевые службы и приложения:
  <ul>
    <li>электронная почта</li>
    <li>веб-серверы</li>
    <li>служба каталогов</li>
    <li>...</li>
  </ul>

  Приложения:
  <ul>
    <li><b>пакетные</b> - нет прямого учатия человека, важна скорость: скачивание файлов</li>
    <li><b>интерактивные</b> - взаимодействие человека и машины, важно время ответа и скорость: онлайн торговля, ...</li>
    <li><b>реального времени</b> - общение между людьми, важна скорость, но не качество: IP-телефония, видеоконференции, ...</li>
  </ul>

  **Узел** - устройство учавствующее в приёме и передаче данных.
  
  **Протокол** - набор правил для управления сетевым взаимодействием.

  **Клиент** - приложение-инициатор сетевого взаимодействия.

  **Сервер** - приложение, отвечающее клиентам.
</details>

<details>
  <summary>Сетевые устройства</summary>
  <br>
  
  <ul>
    <li>хаб</li>
    <li>коммутатор</li>
    <li>точка доступа</li>
    <li>маршрутизатор</li>
    <li>шлюз</li>
    <li>firewall/брандмауэр</li>
  </ul>
</details>

<br>
<br>
<br>

## <a id="title6">Панель устройств в cisco packet tracer</a>

<details>
  <summary>Рис.1</summary>
  <br>

  <img width="162" height="91" alt="image" src="https://github.com/user-attachments/assets/a7ca9f67-61af-45a7-99b7-4a47040cb1f0" />

  На рис.1 изображены ***конечные*** и ***промежуточные устройства***, а также ***линии связи*** (сетевые среды/среда передачи данных).
</details>

<details>
  <summary>Рис.2</summary>
  <br>

  <img width="491" height="91" alt="image" src="https://github.com/user-attachments/assets/48ff5b6f-ed20-43af-b891-fbb202a966fa" />

  На рис.2 в верхнем левом углу изображён значок молнии - ***среда передача данных*** (кабеля). Также среда может быть **беспроводной** (радиоволны).
</details>

> В практических работах будем использовать прямой кабель (чёрный провод) и кроссовер (рядом с чёрным провод выглядит, как пунктир).

<details>
  <summary>Прямой</summary>
  <br>

  Используется для подключения устройств разного типа (конечные и промежуточные).
</details>

<details>
  <summary>Кросссовер</summary>
  <br>

  Используется для подключения устройтсв одинакового типа (конечное и конечное, промежуточное и промежуточное).
</details>

<br>

<br>

<br>

## <a id="title1">Конечные устройства</a>

<details>
  <summary>Рис.3</summary>
  <br>

  <img width="612" height="83" alt="image" src="https://github.com/user-attachments/assets/65ff05b1-8224-4b0c-b0a9-05a1b778b142" />

  На рис.3 в верхнем нижним углу конечные устройства.
</details>

<details>
  <summary>Конечные устройства</summary>
  <br>

  <ul>
    <li>компьютер</li>
    <li>сервер</li>
    <li>принтер</li>
    <li>смартфон</li>
  </ul>
  
  Они отправляют запросы и ответы, когда хотят что-то узнать у других конечных устройств.
</details>

<br>

<br>

<br>

## <a id="title2">Промежуточные устройства</a>

<details>
  <summary>Рис.4</summary>
  <br>

  <img width="275" height="50" alt="image" src="https://github.com/user-attachments/assets/1fbe8af8-aefc-492f-85a6-44c487bd619b" />

  На рис.4 изображены хабы.
</details>

<details>
  <summary>Рис.5</summary>
  <br>

  <img width="460" height="57" alt="image" src="https://github.com/user-attachments/assets/7b51bc4d-9c3a-4906-85be-08ccb68f39f8" />

  На рис.5 изображены коммутаторы.
</details>

<details>
  <summary>Рис.6</summary>
  <br>
  
  <img width="613" height="63" alt="image" src="https://github.com/user-attachments/assets/d0130078-9257-4b20-b3bb-d5d973d65cf1" />

  На рис.6 изображены маршрутизаторы (по-английски роутер).
</details>

<details>
  <summary>Промежуточные устройства</summary>
  <br>

  ***Пример***: 
  <ul>
    <li>хаб</li>
    <li>коммутатор</li>
    <li>маршрутизатор</li> 
    <li>...</li>
  </ul>
  
  Управляют процессом передачи данных (направляют и фильтруют данные), занимаются обеспечением связи между сетями. Также могут обмениваться служебной информацией между собой.
</details>

<details>
  <summary>Повторители и хабы</summary>
  <br>
  
  Используются, когда устройства находятся на большом расстоянии.

  > Причина в том, что в физической среде происходит постепенное затухание сигнала. Данные устройства распознают сигнал и повторяют в первоначальном виде.

  > Обычно у витой пары (прямой) и кроссовер дистанция составляет 100 метров. Если захотим что-то передать, что превышает это расстояние, понадобится более качественные кабеля или промежуточные устройства.
</details>

Отличия:

<details>
  <summary>Повторитель</summary>
  <br>
  
  1 вход и 1 выход (2 порта). Соединяет 2 устройства.
</details>

<details>
  <summary>Хаб или концентратор</summary>
  <br>
  
  **Многопортовый повторитель**
  
  Концепция работы, как у повторителя, но получив сигнал, к примеру с порта 1, отправит сигнал на другие порты, к которым подключены кабеля (другие устройства).

  > У хабов есть одна проблема. Если на 2 порта и более прийдёт одновременно сигнал, то произойдёт **коллизия** (информация столкнётся, перемешается и восстановить нельзя будет). Происходит из-за того, что внутри шина для всех портов (шина в данном контексте - 1 среда передачи данных для многих).

  > Решение: CSMA. 

  > Повторители и хабы работают на **физическом уровне модели OSI** (в практических работах). Этот уровень использует **биты**.
</details>

<details>
  <summary>CSMA</summary>
  <br>

  * **CSMA** - протокол, который требует от устройств прослушивания "сетевой среды". Передача осуществляется только при "свободном состоянии". 

  Но при увеличении количества узлов растет вероятность возникновения коллизий. Увеличение числа коллизий снижает доступную ширину полосы пропускания для полезного трафика.

  > Решение: использовать коммутаторы.

  * **CSMA/CD** (Collision Detection) обнаруживает коллизии во время передачи и реагирует на них. CSMA/CD используется в проводных сетях Ethernet (стандарт 802.3)
  
  * **CSMA** (без CD/CA) — это базовый протокол, который часто модифицируется, например, с помощью CSMA/CA (Collision Avoidance), чтобы предотвратить коллизии до их возникновения. CSMA/CA — в беспроводных сетях Wi-Fi (стандарт 802.11).
</details>

<br>

### Продолжим

<details>
  <summary>Коммутатор и сетевой мост</summary>
  <br>
  
   Обеспечивают связь ***внутри локальной сети*** (передача данных от 1 устройства к другому, в рамках одного адреса сети или подсети.
</details>

<details>
  <summary>Коммутатор</summary>
  <br>
  
   **Многопортовый сетевой мост**

   Главное отлчиие, что данное устройство ищет физические адреса ***аппаратно***, а мост программно.

   3 режима работы коммутатора:

   1. **Store & Forward** - ***сохранить и передать***:

        * Коммутатор получил сигнал, распознал.
        
        * Проверил контрольную сумму (CRC). Об этом в ICMP симуляции.

        * Узнал из заголовка MAC-адрес получателя.
     
        * Адрес в таблице коммутации, отсылает кадр, преобразовав в сигнал в соответствующий порт.

   2. **Cut-through** - ***самый быстрый способ передачи данных***.

        * Когда коммутатор получает сигнал, распознаёт и преобразует в кадр.
     
        * Из заголовка получает MAC-адрес и отправляет на соответствующий порт, НЕ ПРОВЕРЯЯ CRC. Из-за этого возникают коллизии.

   3. **Fragment-free** - ***безфрагментный***.

        * Не проверяет CRC, но обнаруживает коллизии (проверка первые 64 байт кадра, обычно ошибка там).
</details>

<details>
  <summary>Концепция работы сетевого моста</summary>
  <br>

  > 1. ***Сетевой мост*** на физическом уровне модели OSI распознаётся сигнал, который послали по кабелю, преобразует его ***в кадры***. К каждому кадру добавляют ***заголовок*** и ***трейлер***.
  > 2. Далее сетевой мост высчитывает ***check sum*** кадра и сранивает с трейлером (сравнивает значения).
  > 3. Если не совпало, то кадр отбрасывется.
  > 4. Если совпало, то сетевой мост изучает заголовок. В данном случае ***физический адрес*** получетеля (MAC-адрес устройства).

  > ***MAC-адрес*** - уникальный номер каждого устройства. 12 символов в 16 ССЧ. Первая половина - адрес производителя. Вторая половина - уникальный идентификатор. Он всегда постоянен.
      
  > 5. У устройств в памяти хранится таблица - MAC-адрес (тот самый физический адрес) и ***порт*** (физический, номер).   
  > 6. Если в таблице MAC-адрес есть, то кадр передаётся на порт.  
  > 7. Если нет, то включается механизм поиска MAC-адреса.
   
  > Здесь задействуется ARP-протокол. У каждого устройства есть эта ARP-таблица, по мере необходимости, она обновляется. Если физический адрес есть, то таблица его выдаст.  
  > Если MAC-адреса нету в таблице, то устройство делает ***широковещательный запрос ARP*** (в заголовок кадра записывается последнее значение физического адреса - в 16-чной системе счисления это FFF...). Он рассылается всем устройствам в сети.
   
  > В запросе будет находится MAC-адрес, IP-адрес источника, IP-адрес получателя. Его суть: "кому принадлежит этот IP-адрес?"
  
  > 8. Cоответсвующее устройство с таким IP, отправляет ответ. В нём будет записан MAC-адрес получателя. 
  > 9. После этого обновляется таблица. Теперь можно начинать передачу данных.
  
  > ARP:
  
  <img width="520" height="558" alt="image" src="https://github.com/user-attachments/assets/7a0bdf8c-5dba-4a37-b274-1a0af7704a30" />
  
  > Так выглядит запрос.
  
  <img width="454" height="364" alt="image" src="https://github.com/user-attachments/assets/4e0a8a48-fb45-4439-8447-c684120300c6" />
   
  > Так выглядит ответ
  
  > Коммутаторы и сетевые мосты работают на канальном уровне модели OSI. Этот уровень использует кадры.
</details>

<br>

### Продолжим

<details>
  <summary>Маршрутизатор</summary>
  <br>

   Обеспечивают **между локальными сетями**, передаёт данные между ними.

   **Задача** - определить путь, по которому будут проходить пакеты. Для этого используется маршрутизация:
   <ul>
     <li>статическая</li>
     <li>динамическая</li>
   </ul>

   > Работает на сетевом уровне модели OSI. Это уровень использует ***пакеты***. На этом уровне работает IP-протокол.
</details>

<br>

<br>

<br>

## <a id="title3">Классификация компьютерных сетей</a>

<details>
  <summary>Персональная сеть</summary>
  <br>
  
  Передача данных между устройствами, которые находятся рядом друг с другом. Расстояние 10-20 см до пары метров.
    
  > Могут взаимодейтсвовать с другими сетями. Используют Wi-Fi, Bletooth,...
    
  > Пример: часы и смартфон.
</details>

<details>
  <summary>Локальная сеть</summary>
  <br>

   Объединяет устрйства на небольшом расстоянии (1-2 км, мб больше). Не зависит от других сетей.

   1. **Одноранговые локальные сети** - без серверов. Компы являются и клиентами, и серверами.
   
   > Пример: состоят из компьютеров, мб принтеров.

   2. **C сервером**.
   
   > Примеры серверов: файл-сервер, принт-сервер или сервер печати, почтовый сервер, сервер базы данных и другие - все эти типы являются хранилищами.
</details>

<details>
  <summary>Виртуальная приватная сеть</summary>
  <br>
  
  Для безопасного и защищённого соединения. Подключения отдельных серверов с обеих сторон через глобальную сеть.
    
  > Пример: у работодателя есть такая сеть для доступа к закрытым ресурсам для определённых сотрудников, но находится в другом филиале конторы.
</details>

<details>
  <summary>Территориальные сети</summary>
  <br>
  
  100 – 1000 км: ***Региональные*** и ***корпоративные***.

  > Пример: чтобы отделения могли обмениваться информацией между собой в случае непредвиденных обстоятельств (оповещение и т.д.).
    
  > На этом уровне задействовано другое оборудование: высокoпроизводительное роутеры и оптоволоконные кабеля.
</details>

<details>
  <summary>Глобальная сеть</summary>
  <br>
  
  Объединяет между собой неограниченное количество локальных, региональных сетей, может находиться в нескольких странах.

  > Задействованы магистральные кабеля (по океану), спутники и т.д. Пример: интернет.
</details>

<details>
  <summary>Пример</summary>
  <br>
  
  Рассмотрим провайдер.

  > Допустим, пользователь подключается к сети и пишет сообщение своему другу, но он в другом регионе, то путь запроса следующий:

  > конечный пользователь -> локальный провайдер -> региональный провайдер -> магистральный провайдер -> региональный провайдер друга -> локальный провайдер друга -> конечный пользователь (друг).

  До магистрального уровня подключение к провайдеру идёт через POP (точка присутствия).
  
  **POP** = являтся пограничным пунктом для продвижения по локальным, региональным сетям. 
  
  **NAT** (точка доступа к сети) задействована на магистральых сетях, перенаправляет трафик к нужному региональному провайдеру.
</details>

<br>

<br>

<br>

## <a id="title4">Топология</a>

* Физическая - взаимное расположение элементов сети.

* Логическая - путь потоков данных между элементами.

> В практических работах используем логическую.

Виды:

<details>
  <summary>Полносвязная</summary>
  <br>
  
  Все устройтсва соединены между собой.

  > Из +: надёжность. Из -: закупка дополнительных кабелей.
</details>

<details>
  <summary>Шинная</summary>
  <br>
  
  Все устройства подключены к 1 кабелю, передача данных по шине.

  > Из +: дёшево. Из -: ограниченная длина кабеля; поломки из-за высокой нагрузки.
</details>

<details>
  <summary>Звезда</summary>
  <br>
  
  Для связи между устройствами используется центральный узе (промежуточное устройство).

  > Из +: хорошая изоляция устройств и простота в расширении (подключил к порту); если сломался пк, то сеть дальше функционирует. Из -: если сломался центральный узел, то сеть упала.
</details>

<details>
  <summary>Кольцевая</summary>
  <br>
  
  Передача данных по кольцу.

  > Из +: надёжность. Из -: если сломался пк, то прийдётся его убрать, чтобы сеть дальше функционировала.
</details>

> Есть и другие виды топологий. Из привидённых в чистом виде никогда не используются, их комбинируют. Для эффективности и минимальных затрат.

<br>

<br>

<br>

## <a id="title5">IP-адреса</a>

<details>
  <summary>IP-адрес</summary>
  <br>
  
  Логический адрес устройства в сети.

  <ul>
    <li>Статические (вводятся вручную)</li>
    <li>Динамические. (DHCP)</li>
  </ul>

  > Статические используютя, когда нужен один и тот же IP на 1 устройстве.
  > Пример: сервер.

  > Динамические выдаются автоматически при подключении к сети. Позволяет адрес использовать повторно, когда устройство отключается от сети.  
</details>

<details>
  <summary>IPv4, IPv6</summary>
  <br>
  
  IPv4 - 32 битный адрес (4 байта/ 4 октета). 1-ый октет слева и так далее.
  
  IPv6 - 128 бит.

  > На практических работах будем использовать IPv4.
</details>

<details>
  <summary>Классы</summary>
  <br>
  
  <img width="457" height="181" alt="image" src="https://github.com/user-attachments/assets/02c951e0-e8cd-45fc-bae7-ca3315e698c1" />

  > Раньше использовалось деление на классы, но вскоре их отменили из-за большое количества пользователей в интернете, на смену пришла CIDR.

  <ul>
    <li>А - за большие сети</li>
    <li>B - за средние сети</li>
    <li>С - за маленькие сети</li>
    <li>D - за мультикаствещание: 224.0.0.0 - 239.255.255.255</li>
    <li>E - для экспериментальных целей: 240.0.0.0 - 255.255.255.254</li>
  </ul>
</details>

<details>
  <summary>Частные адреса</summary>
  <br>

  Не все IP-адреса используются в интернете, есть те, которые применяются **только внутри локальных сетей**.

  <ul>
    <li>192.168.x.x - в домашних и небольших локальных сетях</li>
    <li>10.x.x.x - в корпоративных сетях</li>
    <li>172.16.x.x — 172.31.x.x - в частных сетях</li>
  </ul>
</details>

<details>
  <summary>unicast, multicast, broadcast</summary>

  * **Unicast** - информация передаётсся от 1 конечного устройства к другому.

  * **Multicast** - информация передаётся на 1 или несколько конечных устройств (multicast клиенты и multicast данные).
      
      * От 224.0.0.0 до 239.255.255.255.
      
      * Используются для сбережения пропускной способности в сети.
      
      * Пример: обмен информации о маршрутах, расслыка, лента новостей, ...
  
  * **Broadcast** - информация передаётся на все конечные устройства в сети. Забавно, но когда конечное устройство получает пакет, обработка unicast.
  
      * Маршрутизатор нельзя настроить на передачу широковещательного трафика, иначе бы забили всю сеть.
      
      * Пример: ARP, RIP, ...
   
      * **Напрвленное широковещание** - всем хостам конкретной сети. Удобен для отправки трафика за пределы локальной сети. Пример: хост отправляет данные в сеть 172.16.5.0/24, но хост отрпавителя другой; в заголовке 172.168.5.255.
   
      * **Ограниченный широковещание** - передача данных всем конечным устройствам в локальной сети. Пример: хост сети 172.168.5.0/24 использует 255.255.255.255 для обработки пакета только в этой локальной сети.
</details>
<details>
  <summary>Маска подсети</summary>
  <br>

  У каждого класса своя ***маска подсети***. 
  
  А - 255.0.0.0 или префикс /8. 
  
  В - 255.255.0.0 или /16. 
  
  С - 255.255.255.0 или /24...

  **Определяет границу сетей** 
  
  > Если 2 сети имеют разные маски, то не смогут обратиться друг к другу без шлюза (в cisco обычно в роли шлюза выступает маршрутизатор, который имеет 2 сетевых интерфейса = 2 разных шлюза для 2 сетей, чтобы пакет из одной сети мог перейти в другую).

  > Далее представлена таблица масок, обозначение в виде префикса и двоичное представление.

  <img width="633" height="800" alt="image" src="https://github.com/user-attachments/assets/c4f9392e-965f-45b4-9fb0-162b036f0fc0" />
</details>

<details>
  <summary>Пример</summary>
  <br>

  Разберём адреса, маски, префиксы подробнее:
  
  1. Для класса А с префиксом /8 только 1 октет под ***адрес сети***, а 3 оставшихся октета под ***хосты***. Пример: сеть 11.0.0.0. 11.0.0.0 - адрес сети. 11.255.255.255 - широковещательный адрес. Оставшиеся адреса отдавали хостам. Получится около 16 миллионов +-.

  2. Для класса В с префиксом /16 только 2 октета под ***адрес сети***, а 2 оставшихся октета под ***хосты***. Пример: сеть 129.0.0.0. 129.0.0.0 - адрес сети. 129.0.255.255 - широковещательный адрес. Оставшиеся адреса отдавали хостам. 129.1.0.0 уже другая сеть с такой же маской.

  3. и т.д.

  > Но бывают и другие ситуации.
</details>

<details>
  <summary>Пример</summary>
  <br>

  > Допустим, что у нас нет столько IP-адресов, нет роутера, а сеть нужно разделить. Чтобы разработчики не имели доступ к файлам отдела маркетинга, отдела бухгалтерии, и т.д. У нас есть только 1 IP, к примеру, 192.168.0.0.

  1. Первые 3 октета мы трогать не можем. Прийдётся делить 4 октет. А у нас 4 отдела, в каждом по 15 пк.
  
  2. Для IPv4 есть формула ***N+S+H=32***. ***N*** - кол-во битов отданные под сеть (речь идёт к какому классу относится). ***S*** - кол-во заимственных битов у хостов, чтобы отдать на подсети. ***H*** - кол-во битов для хостов.
  
  > Правило при разбиении сети на подсети: ***1 маска - для всех подсетей***.
  
  3. ***S = 2^(кол-во битов, которое отдадим) >= количества требуемых подсетей***. 2^2 = 4. 2 бита отдадим.
  
  4. ***Маска*** = N + S***. 24+2 = 26. 255.255.255.192.
     
  5. ***H = 32 - S - N*** = 32 - 24 - 2 = 6. ***2^H >= требуемых адресов.*** 2^6 = 64 - 2 (адрес сети, широковещательный адрес) = 62 > 60. 6 битов отдадим на подсети.
     
  6. Отдел 1 - 192.168.0.0-192.168.63.255, oтдел 1 - 192.168.64.0-192.168.127.255, Отдел 1 - 192.168.128.0-192.168.191.255, Отдел 1 - 192.168.192.0-192.168.255.255.
</details>

<details>
  <summary>Пример</summary>

  1. Когда не хватает IP-адресов, можно использовать **прокси сервер**.

  **Прокси** - клиент делает запрос к прокси, сервер подключается к ресурсу в интернете и возвращает результат клиенту.

  <img width="716" height="323" alt="image" src="https://github.com/user-attachments/assets/99eaf36a-d3af-455f-817f-a90441e531cb" />

  <img width="927" height="558" alt="image" src="https://github.com/user-attachments/assets/5cdba8dc-16b2-469c-9a7d-3303add7c21f" />

  2. Использование **NAT/PAT**.

  **NAT** - технлогия, которая позволяет нкоторым устройствам ***в частной сети*** исользовать 1 публичный IP-адрес.

  Концепция:

  * Маршрутизатор ведёт таблицу о преобрзование IP-адресов и портов.

  * Когда устройство в локальной сети отправляет запрос в интернет, маршрутизатор записывает в таблицу: ***частный адрес и лог. порт откуда*** = **сокет**.

  * Затем маршрутизатор преобразует частный IP-адрес в публичный, записывает рядом записью: ***публичный адрес и лог.порт назначения***.

  * Когда ответные данные return из интернета, маршрутизатор находит запись с публичным адресом и портом назначения, извлекает из записи частный адрес и лог.порт, передаёт данные.

  3. Переход на IPv6 - адресов больше.
</details>
